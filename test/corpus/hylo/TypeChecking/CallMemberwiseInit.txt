==================
CallMemberwiseInit
==================

//- typeCheck expecting: failure

type A {
  var foo: Int
  var bar: Int
  public memberwise init
}

type B<X, Y> {
  var foo: X
  var bar: Y
  public memberwise init
}

type C<X> {
  public memberwise init
}

fun check<T>(_ x: T) {}

public fun main() {
  let a0 = A(foo: 42, bar: 0)
  check<A>(a0)

  //! @+1 diagnostic cannot pass value of type '{}' to parameter 'sink Int'
  let _ = A(foo: (), bar: 2)

  let b0 = B(foo: 42, bar: true)
  check<B<Int, Bool>>(b0)

  let b1 = B(foo: true, bar: 42)
  check<B<Bool, Int>>(b1)

  let b2: B<Bool, Int8> = B(foo: true, bar: 42)
  check<B<Bool, Int8>>(b2)

  let b3: B<_, Int8> = B(foo: true, bar: 42)
  check<B<Bool, Int8>>(b3)

  //! @+1 diagnostic cannot pass value of type 'Bool' to parameter 'sink Int'
  let _: B<Int, Int> = B(foo: true, bar: 42)

  //! @+1 diagnostic not enough contextual information to infer generic arguments
  C()
}

----

(source_file
  (single_line_comment)
  (product_type_decl
    (product_type_head
      (identifier))
    (binding_decl
      (binding_pattern
        (binding_introducer)
        (identifier)
        (name_type_expr
          (selector
            (identifier_expr
              (identifier))))))
    (binding_decl
      (binding_pattern
        (binding_introducer)
        (identifier)
        (name_type_expr
          (selector
            (identifier_expr
              (identifier))))))
    (function_memberwise_init
      (access_modifier)))
  (product_type_decl
    (product_type_head
      (identifier)
      (generic_clause
        (generic_type_parameter
          (identifier))
        (generic_type_parameter
          (identifier))))
    (binding_decl
      (binding_pattern
        (binding_introducer)
        (identifier)
        (name_type_expr
          (selector
            (identifier_expr
              (identifier))))))
    (binding_decl
      (binding_pattern
        (binding_introducer)
        (identifier)
        (name_type_expr
          (selector
            (identifier_expr
              (identifier))))))
    (function_memberwise_init
      (access_modifier)))
  (product_type_decl
    (product_type_head
      (identifier)
      (generic_clause
        (generic_type_parameter
          (identifier))))
    (function_memberwise_init
      (access_modifier)))
  (function_decl
    (function_head
      (function_name
        (identifier))
      (generic_clause
        (generic_type_parameter
          (identifier))))
    (function_signature
      (parameter_decl
        (identifier)
        (name_type_expr
          (selector
            (identifier_expr
              (identifier))))))
    (brace_stmt))
  (function_decl
    (function_head
      (access_modifier)
      (function_name
        (identifier)))
    (function_signature)
    (brace_stmt
      (stmt
        (binding_decl
          (binding_pattern
            (binding_introducer)
            (identifier))
          (expr
            (function_call_expr
              (selector
                (identifier_expr
                  (identifier)))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))))))
      (stmt
        (expr
          (function_call_expr
            (selector
              (identifier_expr
                (identifier))
              (static_argument_list
                (static_argument
                  (name_type_expr
                    (selector
                      (identifier_expr
                        (identifier)))))))
            (call_argument
              (expr
                (selector
                  (identifier_expr
                    (identifier))))))))
      (single_line_comment)
      (stmt
        (binding_decl
          (binding_pattern
            (binding_introducer)
            (wildcard_pattern))
          (expr
            (function_call_expr
              (selector
                (identifier_expr
                  (identifier)))
              (call_argument
                (identifier)
                (expr
                  (tuple_expr)))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))))))
      (stmt
        (binding_decl
          (binding_pattern
            (binding_introducer)
            (identifier))
          (expr
            (function_call_expr
              (selector
                (identifier_expr
                  (identifier)))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))
              (call_argument
                (identifier)
                (expr
                  (boolean_literal)))))))
      (stmt
        (expr
          (function_call_expr
            (selector
              (identifier_expr
                (identifier))
              (static_argument_list
                (static_argument
                  (name_type_expr
                    (selector
                      (identifier_expr
                        (identifier))
                      (static_argument_list
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))))))))
            (call_argument
              (expr
                (selector
                  (identifier_expr
                    (identifier))))))))
      (stmt
        (binding_decl
          (binding_pattern
            (binding_introducer)
            (identifier))
          (expr
            (function_call_expr
              (selector
                (identifier_expr
                  (identifier)))
              (call_argument
                (identifier)
                (expr
                  (boolean_literal)))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))))))
      (stmt
        (expr
          (function_call_expr
            (selector
              (identifier_expr
                (identifier))
              (static_argument_list
                (static_argument
                  (name_type_expr
                    (selector
                      (identifier_expr
                        (identifier))
                      (static_argument_list
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))))))))
            (call_argument
              (expr
                (selector
                  (identifier_expr
                    (identifier))))))))
      (stmt
        (binding_decl
          (binding_pattern
            (binding_introducer)
            (identifier)
            (name_type_expr
              (selector
                (identifier_expr
                  (identifier))
                (static_argument_list
                  (static_argument
                    (name_type_expr
                      (selector
                        (identifier_expr
                          (identifier)))))
                  (static_argument
                    (name_type_expr
                      (selector
                        (identifier_expr
                          (identifier)))))))))
          (expr
            (function_call_expr
              (selector
                (identifier_expr
                  (identifier)))
              (call_argument
                (identifier)
                (expr
                  (boolean_literal)))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))))))
      (stmt
        (expr
          (function_call_expr
            (selector
              (identifier_expr
                (identifier))
              (static_argument_list
                (static_argument
                  (name_type_expr
                    (selector
                      (identifier_expr
                        (identifier))
                      (static_argument_list
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))))))))
            (call_argument
              (expr
                (selector
                  (identifier_expr
                    (identifier))))))))
      (stmt
        (binding_decl
          (binding_pattern
            (binding_introducer)
            (identifier)
            (name_type_expr
              (selector
                (identifier_expr
                  (identifier))
                (static_argument_list
                  (static_argument
                    (name_type_expr
                      (selector
                        (identifier_expr
                          (identifier)))))
                  (static_argument
                    (name_type_expr
                      (selector
                        (identifier_expr
                          (identifier)))))))))
          (expr
            (function_call_expr
              (selector
                (identifier_expr
                  (identifier)))
              (call_argument
                (identifier)
                (expr
                  (boolean_literal)))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))))))
      (stmt
        (expr
          (function_call_expr
            (selector
              (identifier_expr
                (identifier))
              (static_argument_list
                (static_argument
                  (name_type_expr
                    (selector
                      (identifier_expr
                        (identifier))
                      (static_argument_list
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))
                        (static_argument
                          (name_type_expr
                            (selector
                              (identifier_expr
                                (identifier)))))))))))
            (call_argument
              (expr
                (selector
                  (identifier_expr
                    (identifier))))))))
      (single_line_comment)
      (stmt
        (binding_decl
          (binding_pattern
            (binding_introducer)
            (wildcard_pattern)
            (name_type_expr
              (selector
                (identifier_expr
                  (identifier))
                (static_argument_list
                  (static_argument
                    (name_type_expr
                      (selector
                        (identifier_expr
                          (identifier)))))
                  (static_argument
                    (name_type_expr
                      (selector
                        (identifier_expr
                          (identifier)))))))))
          (expr
            (function_call_expr
              (selector
                (identifier_expr
                  (identifier)))
              (call_argument
                (identifier)
                (expr
                  (boolean_literal)))
              (call_argument
                (identifier)
                (expr
                  (integer_literal
                    (decimal_literal))))))))
      (single_line_comment)
      (stmt
        (expr
          (function_call_expr
            (selector
              (identifier_expr
                (identifier)))))))))
